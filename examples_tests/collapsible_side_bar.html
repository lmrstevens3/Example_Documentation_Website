<!DOCTYPE html>
<title>side bar example</title>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="../side_bar.css" type="text/css" media="screen"/>



    <script type="text/javascript">
        const hidden_width = "35px";
        const visible_width = "22%";
        const transition = 400;


        function adjustSideBar() {
            const sidebar = document.getElementById("sidebar_content");
            const titleHeight = document.getElementById("headerAHA_title").clientHeight;
            const buttonHeight = document.getElementById("sidebarToggleButton").clientHeight;
            const footerInView = document.getElementById("aha_footer").getBoundingClientRect();

            sidebar.style.height = "calc(100% -  " +
                (Math.max(window.innerHeight - footerInView.top, 0) + buttonHeight + titleHeight) +
                "px)"

            // console.log(sidebar.style.height);
            // console.log(footerInView.bottom);
        }


        function w3_toggle() {
            const sidebar = document.getElementById("collapsible_sidebar");
            const main = document.getElementById("main");
            const sbc = document.getElementById("sidebar_content");
            sidebar.style.transition = transition + "ms";
            if (sidebar.isClosed) {
                main.style.marginLeft = visible_width;
                sidebar.style.width = visible_width;
                setTimeout(function () {
                    sbc.style.display = ""
                }, transition);
                sidebar.isClosed = false;
            } else {
                main.style.marginLeft = hidden_width;
                sidebar.style.width = hidden_width;

                sbc.style.display = "none";
                sidebar.isClosed = true;
            }
        }

        function toggle_content(id) {
            const content = document.getElementById(id);
            content.style.display = (content.style.display != 'none' ? 'none' : '');
        }

        function toggle(id, x) {
            toggle_content(id);
            x.classList.toggle("fa-angle-down");
            x.classList.toggle("fa-angle-right");
        }

        function collapse(id, leave_open) {

            const content = document.getElementById(id);
            if (content.style.display !== "block" || leave_open) {
                content.style.display = "block";
            } else {
                content.style.display = "none";

            }
        }

        function collapse_sub(id, leave_open, sub_id) {
            collapse(id, leave_open);
            collapse(sub_id);
        }

    </script>
</head>

<body onload="adjustSideBar()" onresize="adjustSideBar()" ontoggle="adjustSideBar()" onscroll="adjustSideBar()">
<div class="sticky_header">
    <div class="header_logo_container">
        <img src='https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTP6DKFhLdw_ZdZs9M2PtpJMQsJxjPffgDGxg&usqp=CAU' alt='Drawing'
             style="width:140px; float:left;">
    </div>
    <h1>Example Collapsible Side bar Page</h1>
</div>
<div class="w3-sidebar w3-bar-block" id="collapsible_sidebar">
    <button class="w3-bar-item w3-button w3-large" id="sidebarToggleButton" onclick="w3_toggle()">
        <i class="fa fa-exchange-alt"></i>
    </button>
    <div id="sidebar_content">
        <div id="toc">
            <ul>
                <li>
                    <button class="sidebar_btn fa fa-angle-down"
                            onclick="return toggle('toc-section-1', this)">
                <span><a href="#section-1"
                         onclick="return collapse('section-1-content', true)">Section 1</a></span>
                    </button>
                    <div id="toc-section-1" style="display: block; overflow:scroll;">
                        <ul>
                            <li>
                                <a href="#section-1-subsection-1" onclick="return collapse('1-subsection-1-content', true)">Sub-Section 1</a>
                                <button class="toc_btn fa fa-angle-right"
                                        onclick="return toggle('1-subsection-1-toc', this);"></button>
                                <div id="1-subsection-1-toc" style="display:none;">
                                    <ul>
                                        <li><a href="#1-subsection-1-1"
                                               onclick="return collapse_sub('page-content-1', true, '1-subsection-1-1-content')">Sub-Section 1 item 1</a>
                                        </li>
                                        <li><a href="#1-subsection-1-2"
                                               onclick="return collapse_sub('page-content-1', true, '1-subsection-1-2-content')">Sub-Section 1 item 2
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <button class="sidebar_btn fa fa-angle-down"
                            onclick="return toggle('toc-section-2', this)">
                <span><a href="#Section-2"
                         onclick="return collapse('section-2-content', true)">Section 2</a></span>
                    </button>
                    <div id="toc-section-2" style="display:block;">
                        <ul>
                            <li>More Subsections...</li>
                        </ul>
                    </div>
                </li>
            </ul>

        </div>
        <button class="sidebar_btn fa fa-angle-right"
                onclick="return toggle('non-content-menu', this)">
            <span>Non-Content Menu</span>
        </button>
        <div id="non-content-menu" style="display:none; overflow: scroll;">
            <ul>
                <li>
                    <a href="https://precision.heart.org/dataset-source-links/covid-19-data-challenge/documents/COVID%2019%20Data%20Challenge%20FAQ%205.11.2020%20FINAL.docx">
                        download link example  <i class="fa fa-download" style="font-size:medium;"></i></a></li>
                <li><a href="../PMP_FAQ.html" target="_blank">HTML file link example</a></li>
                <li><a href="https://precision.heart.org/workspace/about" target="_blank">HTTP link example</a></li>
                </li>
            </ul>
        </div>
    </div>
</div>

<div id="main" style="margin-left:22%;">
    <button type="button" class="collapsible" style="border: .1em solid #b6c1fa;" onclick="return collapse('section-1-content')">
        <a class="anchor" name="section-1"></a><h2>SECTION 1</h2>
    </button>
    <div id="section-1-content" class="content" style="display:block; background-color: #b6c1fa;">
    <button type="button" class="collapsible" onclick="return collapse('1-subsection-1-content')">
        <a class="anchor" name="section-1-subsection-1"></a>
        <h3>Section 1 Subsection 1<i class="fa fa-arrows-alt-v"></i></h3>
    </button>
    <div id="1-subsection-1-content" class="content" style="display:block;">
        <p>SUBSECTION 1 CONTENT</p>
        <button type="button" class="collapsible" onclick="return collapse('1-subsection-1-1-content')">
            <a class="anchor" name="1-subsection-1-1"></a>
            <h4>SUBSECTION  1 SECTION 1<i class="fa fa-arrows-alt-v"></i></h4>
        </button>
        <div id="1-subsection-1-1-content" class="content" >
            <p>SUBSECTION  1 SECTION 1 CONTENT</p>
        </div>
        <button type="button" class="collapsible" onclick="return collapse('1-subsection-1-2-content')">
                <span><a class="anchor" name="1-subsection-1-2"></a>
                <h4>SUBSECTION  1 SECTION 2 <i class="fa fa-arrows-alt-v"></i></h4></span>
        </button>
        <div id="1-subsection-1-2-content" class="content" >
            <p>SUBSECTION  1 SECTION 2 CONTENT</p>
        </div>
    </div>
    </div>

    <button type="button" class="collapsible" onclick="return collapse('section-2-content')">
        <div style="border: .1em solid #b6c1fa;"><a class="anchor" name="Section-2"></a>
            <h2>SECTION 2</h2></div>
    </button>
    <div id="section-2-content" class="content" style="display:block; background-color: #b6c1fa;">
        <h5 style="color: #404766">SECTION 2 CONTENT</h5>
        <p><img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Example.jpg" alt="drawing;"></p>
    </div>
</div>
<footer id="sidebar_footer">
    <div id="#footer_border"></div>
    <h3>&nbsp;&nbsp;Footer</h3>

</footer>
</body>
</html>
